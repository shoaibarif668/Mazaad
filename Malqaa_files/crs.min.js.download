/*!
* country-region-selector
* ------------------------
* 0.5.0
* @author Ben Keen
* @repo https://github.com/benkeen/country-region-selector
* @licence MIT
*/

!function (a, n) { if ("function" == typeof define && define.amd) define([], n); else if ("object" == typeof exports) try { module.exports = n(require()) } catch (a) { module.exports = n() } else a.crs = n() }(this, function () { "use strict"; var m = !0, h = !0, l = [], t = {}, s = [["Bahrain", "BH", "Al Janūbīyah~14|Al Manāmah~13|Al Muḩarraq~15|Al Wusţá~16|Ash Shamālīyah~17"], ["Oman", "OM", "Ad Dakhiliyah~DA|Al Buraymi~BU|Al Wusta~WU|Az Zahirah~ZA|Janub al Batinah~BS|Janub ash Sharqiyah~SS|Masqat~MA|Musandam~MU|Shamal al Batinah~BJ|Shamal ash Sharqiyah~SJ|Zufar~ZU"],["Saudi Arabia", "SA", "'Asir~14|Al Bahah~11|Al Hudud ash Shamaliyah~08|Al Jawf~12|Al Madinah al Munawwarah~03|Al Qasim~05|Ar Riyad~01|Ash Sharqiyah~04|Ha'il~06|Jazan~09|Makkah al Mukarramah~02|Najran~10|Tabuk~07"], ["United Arab Emirates", "AE", "Abu Dhabi~AZ|Ajman~AJ|Dubai~DU|Fujairah~FU|Ras al Khaimah~RK|Sharjah~SH|Umm Al Quwain~UQ"], ["Kuwait", "KW", "Al Aḩmadi~AH|Al Farwānīyah~FA|Al Jahrā’~JA|Al ‘Āşimah~KU|Ḩawallī~HA|Mubārak al Kabir~MU"]], a = function () { l = s; for (var a = document.getElementsByClassName("crs-country"), n = 0; n < a.length; n++)e(a[n]) }, e = function (a) { if ("true" !== a.getAttribute("data-crs-loaded")) { a.length = 0; var n = a.getAttribute("data-default-option"), e = n || "Select country", i = a.getAttribute("data-show-default-option"); m = null === i || "true" === i; var r = a.getAttribute("data-default-value"), o = a.getAttribute("data-value"), l = 0; m && (a.options[0] = new Option(e, "")), B(); var t = b(a); console.log(o); for (var s = 0; s < t.length; s++) { var u = "shortcode" === o || "2-char" === o ? t[s][1] : t[s][0]; t[s][4] && (u = ""), a.options[a.length] = new Option(t[s][0], u), null != r && r === u && (l = s, m && l++) } a.selectedIndex = l; var d = a.getAttribute("data-region-id"); if (d) { var h = document.getElementById(d); if (h) if (M(h), a.onchange = function () { c(a, h) }, null !== r && 0 < a.selectedIndex) { c(a, h); var S = h.getAttribute("data-default-value"), A = "shortcode" === h.getAttribute("data-value"); if (null !== S) { var g = t[m ? a.selectedIndex - 1 : a.selectedIndex][3]; k(h, g, S, A) } } else !1 === m && c(a, h); else console.error("Region dropdown DOM node with ID " + d + " not found."); a.setAttribute("data-crs-loaded", "true") } else console.error("Missing data-region-id on country-region-selector country field.") } }, M = function (a) { var n = a.getAttribute("data-blank-option"), e = n || "-", i = a.getAttribute("data-show-default-option"); h = null === i || "true" === i, a.length = 0, h && (a.options[0] = new Option(e, ""), a.selectedIndex = 0) }, B = function () { for (var a = 0; a < l.length; a++) { for (var n = { hasShortcodes: /~/.test(l[a][2]), regions: [] }, e = l[a][2].split("|"), i = 0; i < e.length; i++) { var r = e[i].split("~"); n.regions.push([r[0], r[1]]) } l[a][3] = n } }, k = function (a, n, e, i) { for (var r = 0; r < n.regions.length; r++) { if ((i && n.hasShortcodes && n.regions[r][1] ? n.regions[r][1] : n.regions[r][0]) === e) { a.selectedIndex = h ? r + 1 : r; break } } }, c = function (a, n) { var e = m ? a.selectedIndex - 1 : a.selectedIndex, i = n.getAttribute("data-default-option"), r = n.getAttribute("data-value"), o = i || "Select region"; if ("" === a.value) M(n); else { n.length = 0, h && (n.options[0] = new Option(o, "")); var l = b(a)[e][3], t = "shortcode" === r && l.hasShortcodes, s = t ? 1 : 0; l.regions.sort(function (a, n) { var e = a[s].toLowerCase(), i = n[s].toLowerCase(); return e < i ? -1 : i < e ? 1 : 0 }); for (var u = 0; u < l.regions.length; u++) { var d = t ? l.regions[u][1] : l.regions[u][0]; n.options[n.length] = new Option(l.regions[u][0], d) } n.selectedIndex = 0 } }, b = function (a) { var n = a.getAttribute("data-whitelist"), e = a.getAttribute("data-blacklist"), i = a.getAttribute("data-preferred"), r = a.getAttribute("data-preferred-delim"), o = l; return (n || e) && (o = function (a) { var n = a.whitelist + "|" + a.blacklist, e = 0; if (!t.hasOwnProperty(n)) if (t[n] = [], a.whitelist) { var i = a.whitelist.split(","); for (e = 0; e < s.length; e++)-1 !== i.indexOf(s[e][1]) && t[n].push(e) } else if (a.blacklist) { var r = a.blacklist.split(","); for (e = 0; e < s.length; e++)-1 === r.indexOf(s[e][1]) && t[n].push(e) } var o = []; for (e = 0; e < t[n].length; e++)o.push(s[t[n][e]]); return o }({ whitelist: n, blacklist: e })), i && (o = u(o, i, r)), o }, u = function (a, n, e) { var i = n.split(",").reverse(), r = {}, o = !1, l = a.filter(function (a) { return -1 === i.indexOf(a[1]) || (r[a[1]] = a, !(o = !0)) }); o && e && l.unshift([e, "", "", {}, !0]); for (var t = 0; t < i.length; t++) { var s = i[t]; l.unshift(r[s]) } return l }; return function (n, e) { var i = !1, a = !0, r = n.document, o = r.documentElement, l = r.addEventListener ? "addEventListener" : "attachEvent", t = r.addEventListener ? "removeEventListener" : "detachEvent", s = r.addEventListener ? "" : "on", u = function (a) { "readystatechange" == a.type && "complete" != r.readyState || (("load" == a.type ? n : r)[t](s + a.type, u, !1), !i && (i = !0) && e.call(n, a.type || a)) }, d = function () { try { o.doScroll("left") } catch (a) { return void setTimeout(d, 50) } u("poll") }; if ("complete" == r.readyState) e.call(n, "lazy"); else { if (r.createEventObject && o.doScroll) { try { a = !n.frameElement } catch (a) { } a && d() } r[l](s + "DOMContentLoaded", u, !1), r[l](s + "readystatechange", u, !1), n[l](s + "load", u, !1) } }(window, a), { init: a } });